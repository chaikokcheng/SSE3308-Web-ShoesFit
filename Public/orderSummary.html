<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Summary</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="orderSummary.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">

        <a class="navbar-brand" href="index.html">
            <img src="images/shoesfitlogo.jpg" alt="ShoesFit Logo" style="height: 50px; margin-right: 10px;">ShoesFit
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="cart.html" title="Cart">
                        <i class="fas fa-shopping-cart"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="profile.html" title="User Profile">
                        <i class="fas fa-user"></i>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container mt-3" id="summary-title">
        <h1>YOUR SHOES IS ON ITS WAY TO YOU</h1>
    </div>
    <br>
    <div class="container mt-3" id="greeting">
        <h6>Order Number: 9023J134</h6>
        <h7>Hi Username,</h7><br>
        <p>Big thanks for choosing ShoesFit! Your trust and support mean the world to us.
            We hope your new shoes bring you all the comfort and style you deserve.
            Thank you for being a part of the ShoesFit family. We look forward to serving you again soon!
        </p>
    </div>
    <br>
    <div class="container mt-3" id="summary">
        <h1>ORDER SUMMARY</h1>
        <div class="row">
            <div class="col-sm-4">
                <h5>DELIVERY ADDRESS</h5>
                <p id="fullAddress"></p>
            </div>
            <div class="col-sm-4">
                <h5>BILLING INFORMATION</h5>
                <p id="billingAddress"></p>
                <h6 id="paymentMethod">Via: </h6>
            </div>
            <div class="col-sm-4">
                <h5>ORDER SUMMARY</h5>
                <div class="row">
                    <div class="col-6">
                        Product
                    </div>
                    <div class="col-6 text-right font-italic">
                        $ <span id="productPrice"></span>
                    </div>
                    <!-- <div class="col-6">
                        Product
                    </div>
                    <div class="col-6 text-right">
                        <i>$ 450.00</i>
                    </div> -->
                </div>
                <div class="row">
                    <div class="col-6">
                        Promo Code
                    </div>
                    <div class="col-6 text-right">
                        <i>$ -0.00</i>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        Shipping
                    </div>
                    <div class="col-6 text-right" id="shipping_charge">
                        <i>$ 10.00</i>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        Total Amount
                    </div>
                    <div class="col-6 text-right">
                        $ <span id="totalAmount"></span>
                    </div>
                    <!-- <div class="col-6">
                        Total Amount
                    </div>
                    <div class="col-6 text-right">
                        <i>$ 350.00</i>
                    </div> -->
                </div>
                <div class="row">
                    <div class="col-6">
                        Total Saving
                    </div>
                    <div class="col-6 text-right">
                        <i>$ 0.00</i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>

    <div class="col-md-11 col-12 mx-auto mb-lg-0 mb-5 orderedItems">
        <h1>ORDERED ITEMS</h1>
        <section id="orderedSection"></section>
        <!-- <div class="card p-3 shadow " id="ordered-items">
            <div class="row">
                <div class="col-md-5 col-12 mx-auto d-flex justify-content-center align-items-center product_img">
                    <img src="${product.img}" alt="${product.name}" class="shoeImage-size">
                </div>
                <div class="col-md-7 col-12 mx-auto px-4 mt-2 d-flex flex-column">
                    <div class="row">
                        <div class="col-8 card-body">
                            <h5 class="mb-3 card-title text-align-left">${product.name}</h5>
                            <p class="shoe-colour">${cartItem.color}</p>
                        <div class="cart-text">
                            <p>Qty: ${cartItem.quantity}</p>
                            <p>Size: ${cartItem.size}</p>
                        </div>
                        </div>
                    </div>
                    <div class="row mt-auto">
                        <div class="col-12 d-flex justify-content-end align-items-end">
                            <br>
                            <h3>$<span id="itemval">${product.price}</span></h3>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    </div>

    <div class="container py-5">
        <button type="button" , id="printBtn" class="btn btn-primary btn-sm pull-left">Print Your Order</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>document.addEventListener("DOMContentLoaded", function () {
            const streetAddress = localStorage.getItem("streetAddress");
            const city = localStorage.getItem("city");
            const state = localStorage.getItem("state");
            const postcode = localStorage.getItem("postcode");

            let fullAddress = '';
            if (streetAddress) fullAddress += streetAddress;
            if (city) fullAddress += `, ${city}`;
            if (state) fullAddress += `, ${state}`;
            if (postcode) fullAddress += `, ${postcode}`;

            document.getElementById("fullAddress").innerHTML = fullAddress;
            document.getElementById("billingAddress").innerHTML = fullAddress;
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const printBtn = document.getElementById("printBtn");
            if (printBtn) {
                printBtn.addEventListener("click", function () {
                    console.log("Print button clicked");
                    window.print();
                });
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const orderedSection = document.getElementById('orderedSection');
            const productPrice = document.getElementById('productPrice');
            const totalAmount = document.getElementById('totalAmount');
            const shippingCharge = 10;
            let total = 0;

            const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];
            $('#total_items_count').text(cart.length);

            if (cart.length === 0) {
                cartSection.innerHTML = '<p>Your cart is empty.</p>';
            } else {
            fetch('products.json')
                .then(response => response.json())
                .then(data => {
                    const cartHTML = cart.map(cartItem => {
                        const product = data.products.find(p => p.id === cartItem.productId);
                        if (product) {
                            total += product.price * cartItem.quantity;
                            return
                            //                      `
                            //                 <div class="order-border" data-id="${product.id}">
                            //                     <img src="${product.img}" alt="${product.name}" class="shoeImage-size">
                            //     <div class="order-details">
                            //         <h6 style="font-size: 18px;">${product.name}</h6>
                            //         <p class="shoe-colour">${cartItem.color}</p>
                            //         <div class="cart-text">
                            //             <p>Price: $ ${product.price}</p>
                            //             <p>Qty: ${cartItem.quantity}</p>
                            //             <p>Size: ${cartItem.size}</p>
                            //         </div>
                            //     </div>
                            // </div>
                            //         `
                            `   
                         <div class="card p-3 shadow " id="ordered-items">
            <div class="row">
                <div class="col-md-5 col-12 mx-auto d-flex justify-content-center align-items-center product_img">
                    <img src="${product.img}" alt="${product.name}" class="shoeImage-size">
                </div>
                <div class="col-md-7 col-12 mx-auto px-4 mt-2 d-flex flex-column">
                    <div class="row">
                        <div class="col-8 card-body">
                            <h5 class="mb-3 card-title text-align-left">${product.name}</h5>
                            <p class="shoe-colour">${cartItem.color}</p>
                        <div class="cart-text">
                            <p>Qty: ${cartItem.quantity}</p>
                            <p>Size: ${cartItem.size}</p>
                        </div>
                        </div>
                    </div>
                    <div class="row mt-auto">
                        <div class="col-12 d-flex justify-content-end align-items-end">
                            <br>
                            <h3>$<span id="itemval">${product.price}</span></h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                         `
                                ;
                        }
                        return '';
                    }).join('');

                    cartSection.innerHTML = cartHTML;
                    productAmt.innerText = total.toFixed(2);
                    totalPrice.innerText = (total + shippingCharge).toFixed(2);
                });

            }
        });
    </script>
    <!-- <script src="main.js"></script> -->
</body>

</html>